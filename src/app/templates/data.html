<style>
    body {
        font-family: Arial, sans-serif;
    }
    table {
        border-collapse: collapse;
        width: 100%;
        margin-top: 20px;
    }

    th, td {
        border: 5px solid #002B61;
        text-align: left;
        padding: 12px;
    }

    th {
        background-color: #F0B300;
    }

    tr:hover {
        background-color: #f5f5f5;
    }
</style>
<script>
    // Using the fetch API
    function get_data() {
        pass = document.getElementById('pass').value
        fetch('/api/data/' + pass)
            .then(response => {
                // Check if the request was successful (status code 200-299)
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                // Parse the JSON in the response
                return response.json();
            })
            .then(data => {
                // Handle the data from the response
                console.log(data);
                // Use a for loop to iterate over the data and create table rows
                var tableBody = document.getElementById("tableBody");
                tableBody.style = "display: block;"

                data.forEach(function (item) {
                    var row = document.createElement("tr");

                    var questionCell = document.createElement("td");
                    questionCell.textContent = item['Question'];
                    row.appendChild(questionCell);

                    var responseCell = document.createElement("td");
                    responseCell.textContent = item['Response'];
                    row.appendChild(responseCell);

                    var timestamp = document.createElement("td");
                    timestamp.textContent = item['Timestamp'];
                    row.appendChild(timestamp);

                    var avgSimilarityCell = document.createElement("td");
                    avgSimilarityCell.textContent = item['Average Similarity'];
                    row.appendChild(avgSimilarityCell);

                    var contextCell = document.createElement("td");
                    contextCell.textContent = item['Context'];
                    row.appendChild(contextCell);

                    var hitsCell = document.createElement("td");
                    hitsCell.textContent = item['Number of Hits'];
                    row.appendChild(hitsCell);

                    var sourcesCell = document.createElement("td");
                    sourcesCell.textContent = item['Sources'];
                    row.appendChild(sourcesCell);


                    tableBody.appendChild(row);
                });
            })
            .catch(error => {
                // Handle any errors that occurred during the fetch
                console.error('Fetch error:', error);
            });
    }
</script>
<body>
    <input type="text" id="pass" name="password">
    <button onclick="get_data()">Submit</button>
    <table id="tableBody" style="display:none;">
        <tr>
            <th>Question</th>
            <th>Response</th>
            <th>Timestamp</th>
            <th>Average Similarity</th>
            <th>Context</th>
            <th>Number of Hits</th>
            <th>Sources</th>
        </tr>
    </table>
</body>
